# Checkpoint 26 - 仪表盘和历史记录功能前端测试指南

## 🚀 测试环境

### 应用状态
- ✅ **后端应用**: http://localhost:8080 (运行中)
- ✅ **前端应用**: http://localhost:3000 (运行中)
- ✅ **数据库**: PostgreSQL (localhost:5432)
- ✅ **缓存**: Redis (localhost:6379)

---

## 📋 测试范围

### 1. 仪表盘功能（Home 页面）
- 数据概览卡片（4个统计指标）
- 快速搜索入口
- 热门搜索关键词
- AI 爆品推荐 Top 4
- 最近活动（搜索历史 + 浏览历史）
- 热门品类趋势图表（ECharts）

### 2. 历史记录功能
- 搜索历史查看、删除、清空
- 浏览历史查看、删除、清空
- 分页功能

---

## 🧪 测试步骤

### 第一步：访问前端应用

1. 打开浏览器，访问：**http://localhost:3000**
2. 如果未登录，会自动跳转到登录页面

### 第二步：用户登录

1. 在登录页面输入：
   - 手机号：`13800138000`
   - 验证码：`123456`（任意6位数字即可）
2. 点击"登录"按钮
3. 登录成功后会自动跳转到首页（仪表盘）

### 第三步：测试仪表盘功能

#### 3.1 数据概览卡片
**位置**：页面顶部，4个统计卡片

**测试内容**：
- [ ] 今日新品发现数 - 显示数字和图标
- [ ] 潜力爆品推荐数 - 显示数字和图标
- [ ] 收藏产品数 - 显示数字和图标
- [ ] AI 推荐准确率 - 显示百分比和图标

**预期结果**：
- 所有卡片正常显示
- 数字格式正确
- 图标和颜色符合设计
- 最后更新时间显示在右上角

#### 3.2 快速搜索入口
**位置**：数据概览卡片下方

**测试内容**：
- [ ] 输入搜索关键词（例如："蓝牙耳机"）
- [ ] 点击"搜索"按钮
- [ ] 验证是否跳转到搜索页面
- [ ] 验证搜索关键词是否正确传递

**预期结果**：
- 搜索框可以正常输入
- 点击搜索后跳转到 `/search?q=蓝牙耳机`
- 搜索历史会被记录

#### 3.3 热门搜索关键词
**位置**：快速搜索框下方

**测试内容**：
- [ ] 查看热门关键词列表（最多显示6个）
- [ ] 点击任意关键词
- [ ] 验证是否跳转到搜索页面

**预期结果**：
- 关键词以标签形式展示
- 上升趋势显示 ↑ 绿色箭头
- 下降趋势显示 ↓ 红色箭头
- 点击后正确跳转到搜索页面

#### 3.4 AI 爆品推荐 Top 4
**位置**：页面中部左侧

**测试内容**：
- [ ] 查看爆品推荐列表（最多4个产品）
- [ ] 点击"查看更多"按钮
- [ ] 点击产品卡片

**预期结果**：
- 产品卡片显示图片、标题、价格
- "查看更多"跳转到爆品推荐页面
- 点击产品卡片可以查看详情（如果已实现）
- 如果没有数据，显示"暂无爆品推荐"

#### 3.5 最近活动
**位置**：页面中部右侧

**测试内容**：
- [ ] 查看最近搜索列表（最多5条）
- [ ] 点击搜索历史项
- [ ] 查看最近浏览的产品（最多4个）
- [ ] 点击浏览历史的产品图片

**预期结果**：
- 搜索历史显示查询内容和结果数量
- 点击搜索历史重新执行该搜索
- 浏览历史显示产品缩略图
- 点击产品图片可以查看详情
- 如果没有数据，显示"暂无最近活动"

#### 3.6 热门品类趋势图表
**位置**：页面底部

**测试内容**：
- [ ] 查看 ECharts 图表是否正常渲染
- [ ] 鼠标悬停查看 tooltip
- [ ] 调整浏览器窗口大小，验证图表响应式

**预期结果**：
- 图表正常显示柱状图（趋势评分）和折线图（周环比）
- 鼠标悬停显示详细数据
- 图表随窗口大小自适应调整
- 如果没有数据，显示"暂无趋势数据"

### 第四步：测试历史记录功能

#### 4.1 生成测试数据
**操作**：
1. 在快速搜索框输入几个不同的关键词并搜索
2. 浏览几个产品详情页（如果已实现）
3. 返回首页查看"最近活动"是否更新

#### 4.2 测试搜索历史
**位置**：首页 → 最近活动 → 最近搜索

**测试内容**：
- [ ] 查看搜索历史列表
- [ ] 点击搜索历史项，验证是否重新执行搜索
- [ ] 验证搜索历史按时间倒序排列

**预期结果**：
- 最新的搜索记录显示在最上面
- 每条记录显示查询内容和结果数量
- 点击后正确跳转到搜索页面

#### 4.3 测试浏览历史
**位置**：首页 → 最近活动 → 最近浏览

**测试内容**：
- [ ] 查看浏览历史（产品缩略图）
- [ ] 点击产品图片
- [ ] 验证浏览历史按时间倒序排列

**预期结果**：
- 最新浏览的产品显示在最前面
- 产品图片正常加载
- 点击后可以查看产品详情

---

## ✅ 测试检查清单

### 仪表盘功能
- [ ] 页面加载时显示 Loading 状态
- [ ] 数据加载成功后正常显示
- [ ] 数据加载失败时显示错误信息和重试按钮
- [ ] 所有 API 调用正常（检查浏览器 Network 面板）
- [ ] 数据概览卡片显示正确
- [ ] 快速搜索功能正常
- [ ] 热门关键词显示和点击正常
- [ ] AI 爆品推荐显示正常（最多4个）
- [ ] 最近活动显示正常（搜索历史 + 浏览历史）
- [ ] 热门品类趋势图表正常渲染
- [ ] 最后更新时间显示正确
- [ ] 页面响应式布局正常

### 历史记录功能
- [ ] 搜索历史正常记录
- [ ] 搜索历史按时间倒序排列
- [ ] 点击搜索历史可以重新搜索
- [ ] 浏览历史正常记录
- [ ] 浏览历史按时间倒序排列
- [ ] 点击浏览历史可以查看产品详情
- [ ] 未登录用户无法查看历史记录

### 用户体验
- [ ] 页面加载速度合理
- [ ] 交互反馈及时（按钮点击、hover 效果）
- [ ] 错误提示友好
- [ ] 空数据状态提示清晰
- [ ] 深色模式支持（如果已实现）

---

## 🐛 常见问题排查

### 1. 页面一直显示 Loading
**可能原因**：
- 后端服务未启动或无法访问
- API 请求失败
- 网络问题

**排查方法**：
1. 打开浏览器开发者工具（F12）
2. 切换到 Network 面板
3. 刷新页面，查看 API 请求状态
4. 检查是否有 4xx 或 5xx 错误
5. 查看 Console 面板是否有错误日志

### 2. 显示"加载仪表盘数据失败"
**可能原因**：
- 后端 API 返回错误
- 数据库连接问题
- Redis 连接问题

**排查方法**：
1. 检查后端日志：查看 `flashsell/start` 进程输出
2. 测试后端 API：使用 curl 或 Postman 直接调用 API
3. 检查数据库和 Redis 是否正常运行

### 3. 数据为空或显示默认值
**可能原因**：
- 数据库中没有数据
- 未执行爆品推荐定时任务
- 未进行过搜索和浏览操作

**解决方法**：
1. 执行一些搜索操作生成搜索历史
2. 浏览一些产品生成浏览历史
3. 手动触发爆品推荐定时任务（如果需要）

### 4. 图表不显示
**可能原因**：
- ECharts 未正确加载
- 图表容器尺寸为 0
- 数据格式不正确

**排查方法**：
1. 检查 Console 是否有 ECharts 相关错误
2. 检查图表容器是否有高度（应该是 400px）
3. 检查返回的数据格式是否正确

### 5. 未登录用户看不到个性化数据
**说明**：这是正常行为
- `/api/dashboard/overview` 支持可选认证
- 未登录用户会看到基础数据
- `/api/dashboard/recent-activity` 必须登录才能访问

---

## 📊 测试数据准备

如果数据库是空的，建议先准备一些测试数据：

### 方法1：通过前端操作生成
1. 登录系统
2. 执行多次搜索操作
3. 浏览多个产品
4. 添加一些收藏

### 方法2：直接插入数据库（可选）
```sql
-- 插入测试品类数据
INSERT INTO category_groups (name, sort_order) VALUES 
('工业用品', 1),
('节日装饰', 2),
('家居生活与百货', 3),
('数码配件与小家电', 4);

-- 插入测试品类
INSERT INTO categories (group_id, name, product_count) VALUES 
(1, '工具配件', 100),
(2, '圣诞装饰', 200),
(3, '厨房用品', 300),
(4, '蓝牙耳机', 400);

-- 插入测试热门关键词
INSERT INTO hot_keywords (keyword, search_count, trend, stat_date) VALUES 
('蓝牙耳机', 150, 'UP', CURRENT_DATE),
('圣诞装饰', 120, 'UP', CURRENT_DATE),
('厨房用品', 100, 'STABLE', CURRENT_DATE),
('工具配件', 80, 'DOWN', CURRENT_DATE);
```

---

## 📝 测试报告模板

测试完成后，请按以下格式反馈：

### ✅ 测试通过的功能
- [ ] 数据概览卡片
- [ ] 快速搜索
- [ ] 热门关键词
- [ ] AI 爆品推荐
- [ ] 最近活动
- [ ] 热门品类趋势图表

### ❌ 发现的问题
1. **问题描述**：
   - 重现步骤：
   - 预期结果：
   - 实际结果：
   - 截图/错误信息：

2. **问题描述**：
   - ...

### 💡 改进建议
- 

---

## 🎯 下一步

测试完成后，根据测试结果：

1. **如果所有功能正常** ✅
   - 标记 Checkpoint 26 为完成
   - 继续下一个任务（市场分析功能）

2. **如果发现问题** ❌
   - 记录问题详情
   - 我会帮您修复问题
   - 重新测试验证

---

## 📞 需要帮助？

如果在测试过程中遇到任何问题，请提供：
1. 具体的操作步骤
2. 浏览器 Console 的错误信息
3. Network 面板的 API 请求详情
4. 后端日志（如果有错误）

我会立即帮您解决！
